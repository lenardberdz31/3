<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>CvSU Schedule</title>
    <style>
        :root { --gold: #fbc02d; --green: #8bc34a; --white: #ffffff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; background: #000; font-family: 'Arial Black', sans-serif; overflow: hidden; height: 100vh; width: 100vw; }
        
        /* BACKGROUND LAYER */
        .bg-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(rgba(0,0,0,0.59), rgba(0,0,0,0.59)), url('image_992624.jpg'); 
            background-size: cover; background-position: center; z-index: -1;
        }

        /* LOCK SCREEN */
        #lock-screen { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; color: white; }
        .pin-dots { display: flex; gap: 10px; margin: 20px 0; }
        .dot { width: 12px; height: 12px; border: 2px solid white; border-radius: 50%; }
        .dot.filled { background: white; }
        .keypad { display: grid; grid-template-columns: repeat(3, 85px); gap: 15px; }
        .key { width: 85px; height: 85px; border: 3px solid var(--gold); border-radius: 50%; color: var(--gold); background: none; font-size: 32px; font-weight: bold; }

        /* MAIN DASHBOARD */
        #main-app { display: none; height: 100%; padding: 40px 20px; flex-direction: column; align-items: center; }
        .header-title { color: white; font-size: 48px; text-align: center; margin-bottom: 30px; line-height: 0.9; }
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .wide-btn { grid-column: span 2; background: var(--gold); height: 75px; border-radius: 15px; border: none; font-size: 24px; color: white; font-weight: 900; box-shadow: 0 4px 0 #c49000; }
        .sub-btn { background: var(--gold); height: 75px; border-radius: 15px; border: none; font-size: 20px; color: white; font-weight: 900; box-shadow: 0 4px 0 #c49000; }
        .util-btn { background: var(--green); height: 55px; border-radius: 25px; border: none; font-size: 18px; color: white; font-weight: 900; }

        /* SUBJECT VIEW */
        #subject-view { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; flex-direction: column; align-items: center; padding-top: 50px; }
        .nav-row { display: flex; gap: 10px; margin-top: 20px; }
        .nav-btn { background: var(--gold); color: white; padding: 10px 15px; border-radius: 8px; border: none; font-weight: bold; }
        .text-area { width: 90%; background: white; border-radius: 15px; padding: 15px; margin-top: 20px; flex-grow: 0.5; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="bg-overlay"></div>

    <div id="lock-screen">
        <img src="image_62b0e5.png" width="160" alt="Logo">
        <h1 style="font-size: 42px; margin: 20px 0;">Welcome, sir!</h1>
        <div class="pin-dots" id="pin-dots">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
        <div class="keypad">
            <button class="key" onclick="press(1)">1</button><button class="key" onclick="press(2)">2</button><button class="key" onclick="press(3)">3</button>
            <button class="key" onclick="press(4)">4</button><button class="key" onclick="press(5)">5</button><button class="key" onclick="press(6)">6</button>
            <button class="key" onclick="press(7)">7</button><button class="key" onclick="press(8)">8</button><button class="key" onclick="press(9)">9</button>
            <button class="key" style="grid-column: 2" onclick="press(0)">0</button>
        </div>
    </div>

    <div id="main-app">
        <img src="image_62b0e5.png" width="80" alt="Logo">
        <h1 class="header-title">Class<br>Schedule</h1>
        
        <div class="btn-grid">
            <button class="wide-btn" onclick="openSub('Competency Appraisal')">Competency Appraisal</button>
            <button class="sub-btn" onclick="openSub('Art Appreciation')">Art App</button>
            <button class="sub-btn" onclick="openSub('Gender and Society')">Gen Soc</button>
            <button class="sub-btn" onclick="openSub('The Contemporary World')">Contemp</button>
            <button class="sub-btn" onclick="openSub('Masining na Pagpapahayag')">Retorika</button>
            <button class="sub-btn" onclick="openSub('Ethics')">Ethics</button>
            <button class="sub-btn" onclick="openSub('Life and Works of Rizal')">Rizal</button>
            <button class="util-btn" onclick="openSub('Exit Clearance')">Exit Clearance</button>
            <button class="util-btn" onclick="openSub('General Notes')">General Notes</button>
        </div>

        <p id="grad-text" style="color: var(--green); font-size: 20px; margin-top: 30px; cursor: pointer;" onclick="setGrad()">244 days before Graduation!</p>
    </div>

    <div id="subject-view">
        <h1 id="view-title" style="color: white; text-align: center; width: 80%;">Subject</h1>
        <div class="nav-row">
            <button class="nav-btn" onclick="viewTab('notes')">Notes</button>
            <button class="nav-btn" onclick="viewTab('reminders')">Reminders</button>
            <button class="nav-btn" onclick="handleDrive()">Files</button>
        </div>
        <div class="text-area" id="content-box" contenteditable="true" oninput="saveContent()">Type here...</div>
        <div class="nav-row" style="margin-top: auto; margin-bottom: 40px;">
            <button class="util-btn" style="width: 140px;" onclick="viewTab('history')">History</button>
            <button class="util-btn" style="width: 140px;" onclick="viewTab('grades')">Grade Tracker</button>
        </div>
        <button class="nav-btn" style="position: absolute; top: 20px; left: 20px; background: red;" onclick="closeSub()">Back</button>
    </div>

    <script>
        let pin = "";
        const correctPin = "2113"; // Updated PIN
        let currentSub = "";
        let currentTab = "notes";

        function press(n) {
            if(pin.length < 4) {
                pin += n;
                document.querySelectorAll('.dot')[pin.length-1].classList.add('filled');
                if(pin.length === 4) {
                    if(pin === correctPin) {
                        document.getElementById('lock-screen').style.display = 'none';
                        document.getElementById('main-app').style.display = 'flex';
                    } else {
                        alert("Wrong PIN"); pin = ""; 
                        document.querySelectorAll('.dot').forEach(d => d.classList.remove('filled'));
                    }
                }
            }
        }

        function openSub(name) {
            currentSub = name;
            document.getElementById('view-title').innerText = name;
            document.getElementById('subject-view').style.display = 'flex';
            viewTab('notes');
        }

        function closeSub() { document.getElementById('subject-view').style.display = 'none'; }

        function viewTab(tab) {
            currentTab = tab;
            const key = `${currentSub}_${tab}`;
            document.getElementById('content-box').innerText = localStorage.getItem(key) || `Enter ${tab} for ${currentSub}...`;
        }

        function saveContent() {
            const key = `${currentSub}_${currentTab}`;
            localStorage.setItem(key, document.getElementById('content-box').innerText);
        }

        function handleDrive() {
            let link = localStorage.getItem(`${currentSub}_drive`) || prompt("Paste Google Drive Link:");
            if(link) { localStorage.setItem(`${currentSub}_drive`, link); window.open(link, '_blank'); }
        }

        function setGrad() {
            const d = prompt("Enter Graduation (YYYY-MM-DD):");
            if(d) localStorage.setItem('gradDate', d);
            updateGrad();
        }

        function updateGrad() {
            const d = localStorage.getItem('gradDate');
            if(d) {
                const diff = Math.ceil((new Date(d) - new Date()) / 86400000);
                document.getElementById('grad-text').innerText = `${diff} days before Graduation!`;
            }
        }
        updateGrad();
    </script>
</body>
</html>

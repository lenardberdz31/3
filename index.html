<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>CvSU Dashboard - Lenard Berdin</title>
    <style>
        :root { --green: #006400; --gold: #FFD700; --bg: #f4f4f4; }
        body { font-family: -apple-system, sans-serif; margin: 0; background: var(--green); overflow-x: hidden; user-select: none; }
        
        /* PIN Entry & Animation */
        #lock-screen { height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; z-index: 1000; transition: opacity 0.5s; }
        .logo-container img { width: 160px; height: 160px; cursor: pointer; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .logo-container.break img { transform: scale(4) rotate(20deg); opacity: 0; filter: blur(15px); }
        .pin-dots { height: 30px; color: white; font-size: 32px; letter-spacing: 12px; margin: 25px 0; }
        .keypad { display: grid; grid-template-columns: repeat(3, 85px); gap: 15px; }
        .key { width: 85px; height: 85px; border: 2px solid var(--gold); border-radius: 50%; color: white; background: none; font-size: 26px; font-weight: bold; }
        .key:active { background: rgba(255, 215, 0, 0.2); }

        /* Dashboard View */
        #main-app { display: none; background: var(--bg); min-height: 100vh; padding: 20px 15px; box-sizing: border-box; }
        .header { font-size: 30px; font-weight: 900; color: var(--green); text-align: center; margin-bottom: 5px; }
        .grad-banner { background: var(--gold); color: var(--green); padding: 12px; border-radius: 12px; text-align: center; font-weight: 800; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        /* Schedule Cards */
        .day-label { font-size: 20px; font-weight: 800; color: var(--green); margin: 20px 0 10px 5px; text-transform: uppercase; border-bottom: 2px solid var(--gold); }
        .card { 
            background: white; padding: 18px; border-radius: 15px; margin-bottom: 12px; 
            border-left: 10px solid var(--green); position: relative; box-shadow: 0 3px 8px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .card.faded { opacity: 0.5; filter: grayscale(1); }
        .card-info b { font-size: 16px; display: block; margin-bottom: 3px; color: #333; }
        
        /* Subject Detailed View */
        #subject-view { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 2000; padding: env(safe-area-inset-top) 20px 20px; box-sizing: border-box; overflow-y: auto; }
        .tabs { display: flex; background: #eee; border-radius: 10px; margin: 20px 0; padding: 5px; }
        .tab { flex: 1; padding: 10px; text-align: center; font-weight: bold; border-radius: 8px; cursor: pointer; }
        .tab.active { background: var(--green); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Buttons */
        .util-btn { background: var(--green); color: white; width: 100%; padding: 18px; border: none; border-radius: 15px; font-weight: bold; font-size: 16px; margin-top: 10px; }
    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="logo-container" id="logo-box">
            <img src="cvsu-logo.png" alt="CvSU" onerror="this.src='https://upload.wikimedia.org/wikipedia/en/9/9f/Cavite_State_University_%28CvSU%29.png'">
        </div>
        <div class="pin-dots" id="pin-display"></div>
        <div class="keypad">
            <button class="key" onclick="press('1')">1</button><button class="key" onclick="press('2')">2</button><button class="key" onclick="press('3')">3</button>
            <button class="key" onclick="press('4')">4</button><button class="key" onclick="press('5')">5</button><button class="key" onclick="press('6')">6</button>
            <button class="key" onclick="press('7')">7</button><button class="key" onclick="press('8')">8</button><button class="key" onclick="press('9')">9</button>
            <button class="key" style="grid-column: 2" onclick="press('0')">0</button>
        </div>
    </div>

    <div id="main-app">
        <div class="header">Class Schedule</div>
        <div class="grad-banner" id="grad-display" onclick="setGradDate()">Set Graduation Date</div>
        
        <div id="schedule-list">
            <div class="day-label">Wednesday</div>
            <div class="card" id="educ198" onclick="openSubject('EDUC 198', 'placeholder.jpg')">
                <div class="card-info"><b>EDUC 198 - Appraisal 2</b>09:00 - 3:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('educ198')">
            </div>

            <div class="day-label">Thursday</div>
            <div class="card" id="gned01" onclick="openSubject('GNED 01', 'art-bg.jpg')">
                <div class="card-info"><b>GNED 01 - Art App</b>07:00 - 9:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('gned01')">
            </div>
            <div class="card" id="gned10" onclick="openSubject('GNED 10', 'gen-soc-bg.jpg')">
                <div class="card-info"><b>GNED 10 - Gen and Soc</b>09:00 - 11:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('gned10')">
            </div>

            <div class="day-label">Friday</div>
            <div class="card" id="gned07" onclick="openSubject('GNED 07', 'contemp-bg.jpg')">
                <div class="card-info"><b>GNED 07 - Contemp</b>07:00 - 9:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('gned07')">
            </div>
            <div class="card" id="gned13" onclick="openSubject('GNED 13', 'retorika-bg.jpg')">
                <div class="card-info"><b>GNED 13 - Retorika</b>09:00 - 11:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('gned13')">
            </div>

            <div class="day-label">Saturday</div>
            <div class="card" id="gned02" onclick="openSubject('GNED 02', 'ethics-bg.jpg')">
                <div class="card-info"><b>GNED 02 - Ethics</b>07:00 - 9:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('gned02')">
            </div>
            <div class="card" id="gned09" onclick="openSubject('GNED 09', 'rizal-bg.jpg')">
                <div class="card-info"><b>GNED 09 - Rizal</b>09:00 - 11:00</div>
                <input type="checkbox" onclick="event.stopPropagation(); toggleFade('gned09')">
            </div>
        </div>
        
        <button class="util-btn" onclick="handlePortal()">CvSU Student Portal</button>
        <button class="util-btn" style="background: #444;" onclick="openClearance()">Exit Clearance Checklist</button>
    </div>

    <div id="subject-view">
        <button style="border:none; background:none; font-size:18px; color:var(--green); font-weight:bold;" onclick="closeSubject()">✕ Close</button>
        <h2 id="subj-name" style="margin:15px 0 5px;">Subject</h2>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab(0)">Checklist</div>
            <div class="tab" onclick="switchTab(1)">Grades</div>
            <div class="tab" onclick="switchTab(2)">History</div>
        </div>

        <div id="tab-0" class="tab-content active">
            <p>Subject Reminders & Tasks</p>
            </div>
        <div id="tab-1" class="tab-content">
            <h3>Grade Predictor</h3>
            </div>
        <div id="tab-2" class="tab-content">
            <h3>Weekly Archive</h3>
            <p>Archiving Week X every Sunday midnight...</p>
        </div>
    </div>

    <script>
        let pinInput = "";
        const correctPin = "2113"; // Set to your requested PIN

        function press(num) {
            pinInput += num;
            document.getElementById('pin-display').innerText = "•".repeat(pinInput.length);
            if(pinInput.length === 4) {
                if(pinInput === correctPin) {
                    const box = document.getElementById('logo-box');
                    box.classList.add('break');
                    if(navigator.vibrate) navigator.vibrate([100, 50, 100]); // Haptic vibration
                    setTimeout(() => {
                        document.getElementById('lock-screen').style.display = 'none';
                        document.getElementById('main-app').style.display = 'block';
                    }, 600);
                } else {
                    alert("Incorrect PIN");
                    pinInput = "";
                    document.getElementById('pin-display').innerText = "";
                }
            }
        }

        function toggleFade(id) {
            document.getElementById(id).classList.toggle('faded'); // 50% opacity fade
        }

        function openSubject(name, bg) {
            document.getElementById('subj-name').innerText = name;
            document.getElementById('subject-view').style.display = 'block';
        }

        function closeSubject() { 
            document.getElementById('subject-view').style.display = 'none'; 
        }

        function switchTab(index) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`tab-${index}`).classList.add('active');
            document.querySelectorAll('.tab')[index].classList.add('active');
        }

        function handlePortal() {
            let url = localStorage.getItem('portalUrl') || prompt("Paste CvSU Portal Link:");
            if(url) {
                localStorage.setItem('portalUrl', url);
                window.open(url, '_blank');
            }
        }

        function setGradDate() {
            const date = prompt("Enter Graduation Date (YYYY-MM-DD):");
            if(date) localStorage.setItem('gradDate', date);
            updateGradDisplay();
        }

        function updateGradDisplay() {
            const date = localStorage.getItem('gradDate');
            if(date) {
                const diff = Math.ceil((new Date(date) - new Date()) / (1000*60*60*24));
                document.getElementById('grad-display').innerText = `Graduation Countdown: ${diff} Days`;
            }
        }
        updateGradDisplay();
    </script>
</body>
</html>

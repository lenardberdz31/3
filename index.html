<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>CvSU Dashboard</title>
    <style>
        :root { --green: #006400; --gold: #FFD700; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        body { font-family: -apple-system, sans-serif; background: var(--green); height: 100vh; width: 100vw; overflow: hidden; }
        
        /* PIN Entry Screen */
        #lock-screen { height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; position: relative; }
        .logo-container img { width: 140px; height: 140px; transition: all 0.5s ease; }
        .logo-container.break img { transform: scale(5); opacity: 0; filter: blur(15px); }
        .pin-dots { height: 30px; color: white; font-size: 28px; letter-spacing: 10px; margin: 15px 0; }
        .keypad { display: grid; grid-template-columns: repeat(3, 70px); gap: 12px; }
        .key { width: 70px; height: 70px; border: 2px solid var(--gold); border-radius: 50%; color: white; background: none; font-size: 22px; font-weight: bold; }

        /* Dashboard (Compact View) */
        #main-app { display: none; background: #f2f2f2; height: 100vh; padding: 10px 15px; display: flex; flex-direction: column; }
        .header { font-size: 24px; font-weight: 800; color: var(--green); text-align: center; margin: 5px 0; }
        .grad-banner { background: var(--gold); color: var(--green); padding: 8px; border-radius: 10px; text-align: center; font-weight: 800; font-size: 14px; margin-bottom: 10px; }
        
        /* Compact Schedule */
        #schedule-list { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; margin-bottom: 10px; }
        .day-group { margin-bottom: 5px; }
        .day-label { font-size: 14px; font-weight: 800; color: var(--green); text-transform: uppercase; border-bottom: 1px solid var(--gold); margin-bottom: 4px; }
        
        .card { 
            background: white; padding: 8px 12px; border-radius: 10px; margin-bottom: 4px; 
            border-left: 6px solid var(--green); display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .card.faded { opacity: 0.5; filter: grayscale(1); }
        .card-info b { font-size: 14px; display: block; color: #2c3e50; }
        .card-info span { color: #7f8c8d; font-size: 12px; font-weight: 600; }
        
        /* Utility Buttons */
        .footer-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: auto; padding-bottom: 15px; }
        .footer-btn { background: var(--green); color: white; padding: 12px; border: none; border-radius: 12px; font-weight: bold; font-size: 13px; }
    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="logo-container" id="logo-box">
            <img src="image_62b0e5.png" alt="CvSU" onerror="this.src='https://upload.wikimedia.org/wikipedia/en/9/9f/Cavite_State_University_%28CvSU%29.png'">
        </div>
        <div class="pin-dots" id="pin-display"></div>
        <div class="keypad">
            <button class="key" onclick="press('1')">1</button><button class="key" onclick="press('2')">2</button><button class="key" onclick="press('3')">3</button>
            <button class="key" onclick="press('4')">4</button><button class="key" onclick="press('5')">5</button><button class="key" onclick="press('6')">6</button>
            <button class="key" onclick="press('7')">7</button><button class="key" onclick="press('8')">8</button><button class="key" onclick="press('9')">9</button>
            <div style="width:70px"></div><button class="key" onclick="press('0')">0</button>
        </div>
    </div>

    <div id="main-app" style="display:none;">
        <div class="header">Class Schedule</div>
        <div class="grad-banner" id="grad-display" onclick="setGradDate()">Set Graduation Date</div>
        
        <div id="schedule-list">
            <div class="day-group">
                <div class="day-label">Wed</div>
                <div class="card" id="educ198"><div class="card-info"><b>EDUC 198</b><span>09:00 - 3:00</span></div><input type="checkbox" onclick="toggleFade('educ198')"></div>
            </div>

            <div class="day-group">
                <div class="day-label">Thu</div>
                <div class="card" id="gned01"><div class="card-info"><b>GNED 01</b><span>07:00 - 9:00</span></div><input type="checkbox" onclick="toggleFade('gned01')"></div>
                <div class="card" id="gned10"><div class="card-info"><b>GNED 10</b><span>09:00 - 11:00</span></div><input type="checkbox" onclick="toggleFade('gned10')"></div>
            </div>

            <div class="day-group">
                <div class="day-label">Fri</div>
                <div class="card" id="gned07"><div class="card-info"><b>GNED 07</b><span>07:00 - 9:00</span></div><input type="checkbox" onclick="toggleFade('gned07')"></div>
                <div class="card" id="gned13"><div class="card-info"><b>GNED 13</b><span>09:00 - 11:00</span></div><input type="checkbox" onclick="toggleFade('gned13')"></div>
            </div>

            <div class="day-group">
                <div class="day-label">Sat</div>
                <div class="card" id="gned02"><div class="card-info"><b>GNED 02</b><span>07:00 - 9:00</span></div><input type="checkbox" onclick="toggleFade('gned02')"></div>
                <div class="card" id="gned09"><div class="card-info"><b>GNED 09</b><span>09:00 - 11:00</span></div><input type="checkbox" onclick="toggleFade('gned09')"></div>
            </div>
        </div>
        
        <div class="footer-btns">
            <button class="footer-btn" onclick="handlePortal()">Portal</button>
            <button class="footer-btn" style="background: #333;" onclick="openClearance()">Clearance</button>
        </div>
    </div>

    <script>
        let pin = "";
        const correct = "2113"; // PIN

        function press(n) {
            if(pin.length < 4) {
                pin += n;
                document.getElementById('pin-display').innerText = "â€¢".repeat(pin.length);
                if(pin.length === 4) {
                    if(pin === correct) {
                        document.getElementById('logo-box').classList.add('break');
                        if(navigator.vibrate) navigator.vibrate([100, 50, 100]);
                        setTimeout(() => {
                            document.getElementById('lock-screen').style.display = 'none';
                            document.getElementById('main-app').style.display = 'flex';
                        }, 600);
                    } else {
                        alert("Wrong PIN"); pin = ""; document.getElementById('pin-display').innerText = "";
                    }
                }
            }
        }

        function toggleFade(id) { document.getElementById(id).classList.toggle('faded'); } // 50% fade

        function setGradDate() {
            const d = prompt("Graduation (YYYY-MM-DD):");
            if(d) { localStorage.setItem('grad', d); updateGrad(); }
        }

        function updateGrad() {
            const d = localStorage.getItem('grad');
            if(d) {
                const diff = Math.ceil((new Date(d) - new Date()) / (86400000));
                document.getElementById('grad-display').innerText = `Graduation Countdown: ${diff} Days`;
            }
        }

        function handlePortal() {
            let u = localStorage.getItem('pUrl') || prompt("Portal Link:");
            if(u) { localStorage.setItem('pUrl', u); window.open(u, '_blank'); }
        }

        updateGrad();
    </script>
</body>
</html>
